{% load i18n wagtailadmin_tags %}

{% auto_update_preview as auto_update %}

<div class="preview-panel preview-panel--mobile" data-preview-panel data-action="{{ preview_url }}" data-auto-update="{{ auto_update|yesno:'true,false' }}">
    <div class="preview-panel__sizes">
        <label class="preview-panel__size-button preview-panel__size-button--mobile" aria-label="{% trans 'Preview in mobile size' %}">
            {% icon name="mobile-alt" %}
            <input type="radio" name="preview-size" value="mobile" data-preview-size checked />
        </label>
        <label class="preview-panel__size-button preview-panel__size-button--tablet" aria-label="{% trans 'Preview in tablet size' %}">
            {% icon name="tablet-alt" %}
            <input type="radio" name="preview-size" value="tablet" data-preview-size />
        </label>
        <label class="preview-panel__size-button preview-panel__size-button--desktop" aria-label="{% trans 'Preview in desktop size' %}">
            {% icon name="desktop" %}
            <input type="radio" name="preview-size" value="desktop" data-preview-size />
        </label>

        <a href="{{ preview_url }}?mode={{ object.default_preview_mode|urlencode }}" target="_blank" rel="noreferrer" class="preview-panel__size-button preview-panel__size-button--new-tab" data-preview-new-tab aria-label="{% trans 'Preview in new tab' %}">{% icon name="link-external" %}</a>
    </div>

    <button class="button button-small button-secondary button--icon preview-panel__refresh-button" data-refresh-preview>{% icon name="rotate" %} Refresh</button>

    <div class="preview-panel__area" data-preview-panel-area>
        {% if object.preview_modes|length > 1 %}
            <div class="preview-panel__modes choice_field">
                {% trans 'Preview mode' %}
                <div class="input">
                    <select name="preview_mode" class="preview-panel__mode-select" data-preview-mode-select>
                        {% for internal_name, display_name in object.preview_modes %}
                            <option value="{{ internal_name }}"{% if internal_name == object.default_preview_mode %} selected{% endif %}>{{ display_name }}</option>
                        {% endfor %}
                    </select>
                    <span>
                    </span>
                </div>
            </div>
        {% endif %}

        <div class="preview-panel__wrapper">
            <iframe title="Preview" class="preview-panel__iframe" data-preview-iframe src="{{ preview_url }}?in_preview_panel=true&mode={{ object.default_preview_mode|urlencode }}"></iframe>
        </div>
    </div>
</div>
